## 鉴权

### 注册

路径：`/auth/register`

方法： `post`

参数：

```json
{
  "userName": "monkey",
  "password": "123123",
  "invitationCode": "7355608"
}
```

> 用户名、密码长度均为 6~16。
>
> 不开放注册，采用邀请码机制（上线记得换）。

返回示例：

```json
{
  "message": "注册成功",
  "data": {
    "id": 1,
    "userName": "monkey"
  }
}
```

### 登录

> 登录接口限制单个ip，单日最多密码错误次数为10次。

路径：`/auth/register`

方法： `post`

参数：

```json
{
  "userName": "monkey",
  "password": "123123"
}
```

返回示例：

```json
{
  "message": "登录成功",
  "data": {
    "id": 1,
    "userName": "monkey",
    "token": "1xdldsjlsdj",
    "time": 1111111111111,
  }
}
```

## 文章

### 添加文章（同时添加标签、简介）

路径：`/article`

方法：`post`

参数：

```json
{
  "title": "文章标题",
  "intro": "简介",
  "content": "文章内容",
  "tags": ["标签1", "标签2"],
  "token": "Bearer 9AQ2H_IYlcQM"
}
```

返回示例：

```json
{
  "message": "添加文章成功",
  "data": {
    "id": 1,
    "time": 1633952525591,
    "title": "文章标题",
    "intro": "简介",
    "content": "文章内容",
    "tags":  [
      { "id": 1, "tagName": '11', "time": 1633952525591 },
      { "id": 2, "tagName": '22', "time": 1633952525591 }
    ]
  }
}
```

### 删除文章

路径：`/article`

方法：`delete`

参数：

```json
{
  "articleID": 1,
  "token": "Bearer 9AQ2H_IYlcQM"
}
```

返回示例：

```json
{
  "message": "文章删除成功",
  "data": {
     "articleID": 1
  }
}
```

### 修改文章：标题、简介、内容

路径：`/article`

方法：`put`

参数：

```json
{
  "articleID": 1,
  "title": "文章标题",
  "intro": "简介",
  "content": "文章内容",
  "token": "Bearer 9AQ2H_IYlcQM"
}
```

返回示例：

```json
{
  "message": "文章修改成功",
  "data": {
    "time": 11111111,
    "id": 1,
    "title": "文章标题",
    "intro": "简介",
    "content": "文章内容"
  }
}
```

### 获取某篇文章

路径：`/article/:id`

方法：`get`

返回示例：

```json
{
  "message": "获取文章成功",
  "data": {
    "time": 1540820691,
    "id": 1,
    "title": "文章标题",
    "content": "文章内容",
    "nav": {
      "nextID": 2,
      "nextTitle": "标题",
      "prevID": -1, // -1表示没有文章
      "prevTitle": "标题"
    }
    "tags":  [
      { "id": 1, "tagName": '11', "time": 1633952525591 },
      { "id": 2, "tagName": '22', "time": 1633952525591 }
    ]
  }
}
```

## 标签

### 向某篇文章追加单个标签

路径：`/tags/article`

方法：`post`

参数：

```json
{
  "articleID": 1,
  "tagName": "标签名称",
  "token": "Bearer 9AQ2H_IYlcQM"
}
```

返回示例：

```json
{
  "message": '追加该文章标签成功',
  "data": {
    "articleID": 1,
    "tags":  [
      { "id": 1, "tagName": '11', "time": 1633952525591 },
      { "id": 2, "tagName": '标签名称', "time": 1633952525591 }
    ]
  }
}
```

> 返回该文章的所有标签

### 删除某篇文章的单个标签

路径：`/tags/article`

方法：`delete`

参数：

```json
{
  "articleID": 1,
  "tagID": 20,
  "token": "Bearer 9AQ2H_IYlcQM"
}
```

返回示例：

```json
{
  "message": '删除该文章标签成功',
  "data": {
    "articleID": 1,
    "tagID": 20
  }
}
```

### 删除某个标签

> 有这个标签的所有文章，都删除该标签

路径：`/tags`

方法：`delete`

参数：

```json
{
  "tagID": 20,
  "token": "Bearer 9AQ2H_IYlcQM"
}
```

返回示例：

```json
{
  "message": '删除该标签成功',
	"data": {
		"tag": { "id": 1, "tagName": '11', "time": 1633952525591 }
  }
}
```

### 修改某个标签名称

路径：`/tags`

方法：`delete`

参数：

```json
{
  "tagID": 20,
  "tagName": "newname",
  "token": "Bearer 9AQ2H_IYlcQM"
}
```

返回示例：

```json
{
  "message": '修改该标签名称成功',
	"data": {
		"tag": { "id": 1, "tagName": '11', "time": 1633952525591 }
  }
}
```

### 标签页 - 获取所有标签和标签对应文章

路径：`/tags/page`

方法：`get`

返回示例：

```json
{
  "message": "获取标签页成功",
  "data": [
    [
			{
    		"id": 2,
    		"tagName": "newname",
    		"time": 1643544569813
  		},
      // 更多标签信息...
    ],
    {
			"newname": [
				{
					"id": 1,
					"time": 1638316800000,
					"title": "文章标题123"
				},
				// 更多文章...
			],
      // 更多标签，以及对应文章...
		}
  ]
}
```

## 主页 - 获取某页的文章列表（10篇/页）

路径：`/article/page/:id`

方法：`get`

> 访问 `/` ，默认 `/page/1`

返回示例：

```json
{
  "message": "获取文章列表成功",
  "total": 5, //共多少个页面
  "data": [
    {
      "articleTime": 1111111,
      "articleID": 1,
      "title": "文章标题",
      "intro": "简介",
      "tags":  [
        { "id": 1, "tagName": '11', "time": 1633952525591 },
        { "id": 2, "tagName": '22', "time": 1633952525591 }
      ],
  	},
		更多...
  ]
}
```

> 每页10篇

## 评论

> 每篇文章限制评论数500条，字数限制1000，限制同一ip评论频率，以及 XSS 过滤；
>
> 用户名校验，长度限制20；邮箱校验，长度限制50；

### 添加评论

路径：`/comment`

方法：`post`

参数：

```json
{
  "articleID": 1,
  "userName": "张三",
  "email": "xxxx@qq.com",
  "content": "评论内容"
}
```

返回示例：

```json
{
  "message": "评论添加成功",
  "data": {
 		"id": 2,
		"time": 1631171810,
    "content": "评论内容2",
    "userName": "张4",
    "articleID": 1
  }
}
```

### 删除评论

路径：`/comment`

方法：`delete`

参数：

```json
{
  "articleID": 27,
  "commentID": 11,
  "token": "Bearer 9AQ2H_IYlcQM"
}
```

返回示例：

```json
{
  "message": "评论删除成功",
  "data": {
		"articleID": 27,
		"commentID": 11
  }
}
```

### 获取评论

路径：`/comment/:articleID`

方法：`get`

返回示例：

```json
{
  "message": '获取文章评论成功',
  "data": [
    {
      "id": 2,
      "time": 1631171810,
      "content": "评论内容2",
      "userName": "张4"
  	},
    ...
  ]
}
```

## 归档页

### 获取某页的文章列表（包含文章的6项/页）

路径：`/archive/:page	`

方法：`get`

> 默认 `/archive/1`

返回示例：

```json
{
  "message": '获取归档文章列表成功',
  "total": 5, //共多少个页面
  "data": [
		{
			"title": '2021-1',
			"articlesData": [
				{
           "id": 1,
           "time": 1111111,
           "title": "文章标题",
           "tags": [
            	{"tagName": '标签1', "tagID": 1},
            	{"tagName": '标签2', "tagID": 2},
          	]
				},
         ...（更多文章）
       ]
  	},
    ...（包含文章的6项/页）
  ]
}
```

